{
  "last_updated": "2026-01-01T17:30:00+03:30",
  "agent_protocol_version": "3.0",
  "base_url": "http://localhost:5000",
  "endpoints": [
    {
      "id": "search_chemicals",
      "method": "GET",
      "path": "/api/search",
      "description": "Search chemicals by name or synonym",
      "parameters": {
        "q": {
          "type": "string",
          "required": true,
          "description": "Search query (name or synonym)"
        }
      },
      "response": {
        "200": {
          "items": "Chemical[]",
          "total": "number",
          "schema": {
            "items": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {"type": "number"},
                  "name": {"type": "string"},
                  "synonyms": {"type": "string"}
                }
              }
            },
            "total": {"type": "number"}
          }
        },
        "500": {
          "items": "[]",
          "total": 0,
          "error": "string"
        }
      },
      "implementation": "backend/app.py:search()",
      "database_tables": ["chemicals"],
      "frontend_consumers": ["src/services/ChemicalSearchService.ts"],
      "last_modified": "2026-01-01",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "get_chemical_detail",
      "method": "GET",
      "path": "/api/chemical/<int:chemical_id>",
      "description": "Get detailed information for a specific chemical",
      "parameters": {
        "chemical_id": {
          "type": "integer",
          "required": true,
          "location": "path",
          "description": "Unique chemical identifier"
        }
      },
      "response": {
        "200": {
          "description": "Full chemical record",
          "schema": {
            "type": "object",
            "properties": {
              "id": {"type": "number"},
              "name": {"type": "string"},
              "synonyms": {"type": "string"},
              "formulas": {"type": "string", "nullable": true},
              "cas_number": {"type": "string", "nullable": true},
              "molecular_weight": {"type": "number", "nullable": true}
            }
          }
        },
        "500": {
          "description": "Server error",
          "value": null
        }
      },
      "implementation": "backend/app.py:get_chemical()",
      "database_tables": ["chemicals"],
      "frontend_consumers": ["src/services/ChemicalSearchService.ts"],
      "last_modified": "2025-12-28",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "analyze_chemicals",
      "method": "POST",
      "path": "/api/analyze",
      "description": "⚠️ SAFETY-CRITICAL: Analyze chemical compatibility matrix",
      "safety_critical": true,
      "request_body": {
        "chemical_ids": {
          "type": "number[]",
          "required": true,
          "min_length": 2,
          "max_length": 20,
          "description": "Array of chemical IDs to analyze"
        },
        "options": {
          "type": "object",
          "required": false,
          "properties": {
            "include_water_check": {
              "type": "boolean",
              "default": true,
              "description": "Include water reactivity analysis"
            }
          }
        }
      },
      "response": {
        "200": {
          "success": true,
          "data": {
            "meta": {
              "timestamp": "string",
              "chemical_count": "number",
              "audit_id": "string"
            },
            "overall": {
              "compatibility": "string",
              "label": "string",
              "color": "string",
              "action": "string"
            },
            "chemicals": "Chemical[]",
            "matrix": "CompatibilityCell[][]",
            "critical_pairs": "CriticalPair[]",
            "warnings": "string[]"
          }
        },
        "400": {
          "success": false,
          "error": {
            "code": "string",
            "message": "string"
          }
        },
        "500": {
          "success": false,
          "error": {
            "code": "INTERNAL_ERROR",
            "message": "Internal server error"
          }
        }
      },
      "implementation": "backend/app.py:analyze_chemicals()",
      "business_logic": "backend/logic/reactivity_engine.py:ReactivityEngine.analyze()",
      "database_tables": ["chemicals", "reacts", "chemical_reactive_groups", "reactivity_rules"],
      "frontend_consumers": ["src/services/ReactivityService.ts"],
      "last_modified": "2025-12-28",
      "breaking_change_history": [],
      "validation_rules": [
        "Minimum 2 chemicals required",
        "Maximum 20 chemicals allowed",
        "All chemical_ids must exist in database",
        "Results logged to audit_log table"
      ]
    },
    {
      "id": "get_reactivity_stats",
      "method": "GET",
      "path": "/api/reactivity/stats",
      "description": "Get reactivity database statistics and health metrics",
      "parameters": {},
      "response": {
        "200": {
          "success": true,
          "data": {
            "total_chemicals": "number",
            "total_reactive_groups": "number",
            "total_rules": "number",
            "coverage_percentage": "number"
          }
        },
        "500": {
          "success": false,
          "error": "string"
        }
      },
      "implementation": "backend/app.py:get_reactivity_stats()",
      "business_logic": "backend/logic/reactivity_engine.py:get_statistics()",
      "database_tables": ["chemicals", "reacts", "reactivity_rules"],
      "frontend_consumers": [],
      "last_modified": "2025-12-28",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "get_reactive_groups",
      "method": "GET",
      "path": "/api/reactive-groups",
      "description": "Get list of all reactive groups for filtering",
      "parameters": {},
      "response": {
        "200": {
          "success": true,
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "number"},
                "name": {"type": "string"},
                "description": {"type": "string"}
              }
            }
          }
        },
        "500": {
          "success": false,
          "error": "string"
        }
      },
      "implementation": "backend/app.py:get_reactive_groups()",
      "database_tables": ["reacts"],
      "frontend_consumers": [],
      "last_modified": "2025-12-28",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "get_favorites",
      "method": "GET",
      "path": "/api/favorites",
      "description": "Get user's favorite chemicals list",
      "parameters": {},
      "response": {
        "200": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "number"},
              "chemical_id": {"type": "number"},
              "added_at": {"type": "string"},
              "note": {"type": "string", "nullable": true}
            }
          }
        },
        "500": {
          "description": "Empty array on error",
          "value": []
        }
      },
      "implementation": "backend/app.py:get_favorites()",
      "database_tables": ["favorites"],
      "frontend_consumers": [],
      "last_modified": "2025-12-15",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "add_favorite",
      "method": "POST",
      "path": "/api/favorites",
      "description": "Add a chemical to user's favorites",
      "request_body": {
        "chemical_id": {
          "type": "number",
          "required": true,
          "description": "Chemical ID to add to favorites"
        },
        "note": {
          "type": "string",
          "required": false,
          "description": "Optional note about the chemical"
        }
      },
      "response": {
        "200": {
          "success": true
        },
        "500": {
          "success": false,
          "error": "string"
        }
      },
      "implementation": "backend/app.py:add_favorite()",
      "database_tables": ["favorites"],
      "frontend_consumers": [],
      "last_modified": "2025-12-15",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "remove_favorite",
      "method": "DELETE",
      "path": "/api/favorites/<int:chemical_id>",
      "description": "Remove a chemical from user's favorites",
      "parameters": {
        "chemical_id": {
          "type": "integer",
          "required": true,
          "location": "path",
          "description": "Chemical ID to remove from favorites"
        }
      },
      "response": {
        "200": {
          "success": true
        },
        "500": {
          "success": false,
          "error": "string"
        }
      },
      "implementation": "backend/app.py:remove_favorite()",
      "database_tables": ["favorites"],
      "frontend_consumers": [],
      "last_modified": "2025-12-15",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "index_page",
      "method": "GET",
      "path": "/",
      "description": "Render main application page",
      "parameters": {},
      "response": {
        "200": {
          "content_type": "text/html",
          "template": "mixer.html"
        }
      },
      "implementation": "backend/app.py:index()",
      "template_files": ["backend/templates/mixer.html", "backend/templates/base.html"],
      "frontend_consumers": [],
      "last_modified": "2026-01-01",
      "breaking_change_history": [],
      "safety_critical": false
    },
    {
      "id": "mixer_page",
      "method": "GET",
      "path": "/mixer",
      "description": "Render chemical mixer interface page",
      "parameters": {},
      "response": {
        "200": {
          "content_type": "text/html",
          "template": "mixer.html"
        }
      },
      "implementation": "backend/app.py:mixer_page()",
      "template_files": ["backend/templates/mixer.html", "backend/templates/base.html"],
      "frontend_consumers": [],
      "last_modified": "2026-01-01",
      "breaking_change_history": [],
      "safety_critical": false
    }
  ],
  "api_contracts": {
    "compatibility_levels": ["C", "I-C", "I", "N"],
    "max_chemicals_per_analysis": 20,
    "supported_response_formats": ["JSON"],
    "cors_enabled": true,
    "rate_limiting": false
  }
}
